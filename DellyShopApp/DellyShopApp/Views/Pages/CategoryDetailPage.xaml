<?xml version="1.0" encoding="utf-8" ?>
<base:BasePage
    x:Class="DellyShopApp.Views.Pages.CategoryDetailPage"
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:base="clr-namespace:DellyShopApp.Views.Pages.Base;assembly=DellyShopApp"
    xmlns:controls="clr-namespace:DellyShopApp.Views.CustomView"
    xmlns:customControl="clr-namespace:DellyShopApp.CustomControl;assembly=DellyShopApp"
    xmlns:font="clr-namespace:DellyShopApp.Helpers;assembly=DellyShopApp"
    xmlns:forms="clr-namespace:FFImageLoading.Forms;assembly=FFImageLoading.Forms"
    xmlns:languages="clr-namespace:DellyShopApp.Languages;assembly=DellyShopApp"
    xmlns:pancakeView="clr-namespace:DellyShopApp.Views.CustomView"
    xmlns:proc="clr-namespace:DellyShopApp.Processors"
    xmlns:renderers="clr-namespace:DellyShopApp.Renderers;assembly=DellyShopApp" 
    xmlns:forms11="http://xamarin.com/schemas/2014/forms/design"
    BackgroundColor="#f5f5f5"
    NavigationPage.HasNavigationBar="False"
    Visual="Material">
    <ScrollView Margin="-10,0,-10,0">
        <StackLayout>
            <!--  DellyShop Title And Description  -->  
             <StackLayout Margin="15,10,15,0">
                <Grid RowSpacing="5" ColumnSpacing="5">                    <Image Source="{Binding Image}"                       x:Name="ShopLogo"                       WidthRequest="130"                        HeightRequest="130"                     HorizontalOptions="Start"/>                    <Image Source="ShopTHigh.png"                      VerticalOptions="Start"                       WidthRequest="130"                        HeightRequest="130"                       HorizontalOptions="End">                        <Image.GestureRecognizers>                            <TapGestureRecognizer Tapped="TapGestureRecognizer_Tapped"/>                        </Image.GestureRecognizers>                    </Image>                </Grid> 
            <!--  SearchBar  --><!--
                    <Frame
                    Margin="0,20,0,10"
                    CornerRadius="17"
                    HasShadow="False"
                    HeightRequest="35"
                    Style="{DynamicResource FrameStyle}">
                    <renderers:BorderlessSearchBar
                        BackgroundColor="white"
                        CancelButtonColor="Black"
                        FontFamily="{DynamicResource VerdanaProRegular}"
                        TextColor="{DynamicResource EntryTextColor}"
                        Placeholder="Search Item...."
                        PlaceholderColor="Black"/>
                </Frame>-->
         
            <!--  Category Name and Image  -->
            <StackLayout Margin="10,5,10,0" HorizontalOptions="FillAndExpand">
                <Grid BackgroundColor="Transparent">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="50" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Image
                        Grid.Row="0"
                        Grid.Column="0"
                        Aspect="AspectFill"
                        Source="{Binding Image}" />
                    <pancakeView:PancakeView
                        Grid.Row="0"
                        Grid.Column="0"
                        BackgroundGradientEndColor="White"
                        BackgroundGradientStartColor="White"
                        CornerRadius="10"
                        HorizontalOptions="FillAndExpand" />
                    <StackLayout Orientation="Horizontal">
                        <Image  
                          
                            HeightRequest="50"
                            HorizontalOptions="Start"
                            VerticalOptions="Center"
                            WidthRequest="50">
                            <Image.GestureRecognizers>
                                <TapGestureRecognizer Tapped="BackPage" />
                            </Image.GestureRecognizers>
                            <Image.Source>
                                <FontImageSource
                                    FontFamily="{DynamicResource MaterialFontFamily}"
                                    Glyph="{x:Static font:FontAwesomeIcons.ThinLeft}"
                                    Size="30"                                    
                                    Color="Black" />
                            </Image.Source>
                        </Image>
                        <Label
                            Margin="-50,0,50,0"
                            Padding="0,5,0,0"
                            FontAttributes="Bold"
                            FontFamily="{DynamicResource VerdanaProBold}"
                            FontSize="18" LineBreakMode="TailTruncation"
                            x:Name="StackLabelCategoryName"
                            HorizontalOptions="CenterAndExpand"
                            TextColor="Black"
                            VerticalOptions="CenterAndExpand" />
                    </StackLayout>

                </Grid>
            </StackLayout>
            <!--  Carousel View  -->
                <pancakeView:PancakeView                     x:Name="CategoryBannerPancake"                    Margin="0,10,0,0"                    Padding="0"                    CornerRadius="8"                    Elevation="2"                    BackgroundColor="#f5f5f5"                    HasShadow="False">                    <forms11:CarouselView                        x:Name="CarouselView"                        Margin="0,0,0,0"                        BackgroundColor="#f5f5f5"                        HeightRequest="{x:OnIdiom Tablet=350,                                                  Phone=200}"                        WidthRequest="100">                        <forms11:CarouselView.ItemTemplate>                            <DataTemplate>                                <ContentView>                                    <forms:CachedImage                                                                           Aspect="Fill"                                        Source="{Binding Banner}"                                                                                WidthRequest="150"                                        HeightRequest="70"/>                                                                   </ContentView>                            </DataTemplate>                        </forms11:CarouselView.ItemTemplate>                    </forms11:CarouselView>                </pancakeView:PancakeView>

                <Label
                Margin="0,10,0,0"
                Padding="5,5,0,0"
                FontAttributes="Bold"
                FontFamily="{DynamicResource VerdanaProBold}"
                FontSize="22"
                HorizontalOptions="Start"
                Text="Product"
                TextColor="Black"
                VerticalOptions="Start" />
            <!--  ProcutctList  -->
            <controls:FlowListView
                x:Name="MostNews"
                BackgroundColor="#f5f5f5"
                FlowColumnCount="2"
                FlowColumnExpand="None"
                HasUnevenRows="False"
                RowHeight="280"
                SeparatorVisibility="None"
                VerticalOptions="StartAndExpand"
                VerticalScrollBarVisibility="Never">
                <controls:FlowListView.FlowColumnTemplate>
                    <DataTemplate>
                        <pancakeView:PancakeView
                            Margin="5"
                            Padding="5"
                            BackgroundColor="White"
                            CornerRadius="8"
                            Elevation="2"
                            HasShadow="False"
                            HeightRequest="250"
                            HorizontalOptions="FillAndExpand"
                            VerticalOptions="StartAndExpand"
                            WidthRequest="{x:OnIdiom Tablet=150,
                                                     Phone=130}">
                            <pancakeView:PancakeView.GestureRecognizers>
                                <TapGestureRecognizer Tapped="ProductDetailClick" />
                            </pancakeView:PancakeView.GestureRecognizers>
                            <StackLayout>
                                <forms:CachedImage
                                    Aspect="AspectFit"
                                    HeightRequest="150"
                                    Source="{Binding Image}" />
                                <Label
                                    FontFamily="{DynamicResource VerdanaProRegular}"
                                    Text="{Binding Title}"
                                    TextColor="Black"
                                    VerticalOptions="Start"
                                    LineBreakMode="TailTruncation"/>
                                <Label
                                    FontFamily="{DynamicResource VerdanaProRegular}"
                                    FontSize="10"
                                    HorizontalOptions="Start"
                                    Text="{Binding Brand}"
                                    TextColor="Black"
                                    VerticalOptions="Start" />

                                <Label
                                    FontFamily="{DynamicResource VerdanaProBold}"
                                    FontSize="16"
                                    HorizontalOptions="EndAndExpand"
                                    Text="{Binding Price, StringFormat='{0} ₹'}"
                                    TextColor="Black"
                                    VerticalOptions="EndAndExpand" />
                            </StackLayout>
                        </pancakeView:PancakeView>
                    </DataTemplate>
                </controls:FlowListView.FlowColumnTemplate>
            </controls:FlowListView>
        </StackLayout>
            </StackLayout>
    </ScrollView>
</base:BasePage>